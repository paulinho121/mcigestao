
  /**
   * Get reservations for a specific product
   */
  async getReservationsByProduct(productId: string): Promise<Reservation[]> {
    if (!supabase) {
      return reservations.filter(r => 
        r.productId === productId || r.productId === `${productId}.0`
      );
    }

    const { data, error } = await supabase
      .from('reservations')
      .select('*')
      .or(`product_id.eq.${productId},product_id.eq.${productId}.0`)
      .order('reserved_at', { ascending: false });

    if (error) {
      console.error('Error fetching reservations for product:', error);
      return [];
    }

    return data.map(r => ({
      id: r.id,
      productId: r.product_id,
      productName: r.product_name,
      productBrand: r.product_brand,
      quantity: r.quantity,
      branch: r.branch as 'CE' | 'SC' | 'SP',
      reservedBy: r.reserved_by,
      reservedByName: r.reserved_by_name,
      reservedAt: new Date(r.reserved_at)
    }));
  },
